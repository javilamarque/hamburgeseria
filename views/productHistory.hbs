{{> header}}

<div class="container mt-4">
    <h1 class="mb-3">Historial del Producto: {{product.descripcion}}</h1>
    <p><strong>Código de Barras:</strong> {{product.cod_barra}}</p>

    <table class="table table-striped table-bordered mt-3">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Fecha y Hora</th>
                <th scope="col">Acción</th>
                <th scope="col">Detalles</th>
                
            </tr>
        </thead>
        <tbody>
            {{#each history}}
            <tr>
                <td>{{moment this.timestamp format="DD/MM/YYYY HH:mm:ss"}}</td>
                <td>{{this.action}}</td>
                <td>
                    {{#if this.details.oldValue}}
                    <p><strong>Anterior:</strong> {{this.details.oldValue.descripcion}} -
                        ${{this.details.oldValue.precio_venta}}</p>
                    {{/if}}
                    <p><strong>Nuevo:</strong> {{this.details.newValue.descripcion}} -
                        ${{this.details.newValue.precio_venta}}</p>
                </td>
                
            </tr>
            {{else}}
            <tr>
                <td colspan="4" class="text-center">No hay historial disponible para este producto.</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
    <a href="/products" class="btn btn-primary mt-3">Volver a Productos</a>
</div>

{{> footer}}